<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" >
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.css"  rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="{% static 'front/style.css' %}">
    <title>Trio</title>
    <style>
        .sm-menu {
            font-size: 12px !important;
        }
    </style>
    
</head>
<header>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg sticky-top navbar-dark" style="background-color: #131212;">
        <!-- Container wrapper -->
        <div class="container">
            <!-- Navbar brand -->
            <a class="navbar-brand me-2" href="{% url 'index' %}">
            <img
                src="{% static 'front/img/tm.png' %}"
                height="50"
                alt="Trio Logo"
                loading="lazy"
                style="margin-top: -1px;"
            />&nbsp;&nbsp;
            <b>TRIO MARKETPLACE</b>
            </a>
        
            <!-- Toggle button -->
            <button
            data-mdb-collapse-init
            class="navbar-toggler"
            type="button"
            data-mdb-target="#navbarButtonsExample"
            aria-controls="navbarButtonsExample"
            aria-expanded="false"
            aria-label="Toggle navigation"
            >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
            </svg>
            </button>
        
            <!-- Collapsible wrapper -->
            <div class="collapse navbar-collapse" id="navbarButtonsExample">
                <!-- Left links -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                </ul>
                <!-- Left links -->
        
                <div class="d-flex align-items-center">                    
                    
                    <a  class="btn px-3 bt-sm" href="{% url 'active_post' %}" style="color:white; background-color:rgb(204, 104, 22);" role="button">
                        <span style="font-size: x-small;">Post Ad</span>
                    </a>
                    {% if username %}                     
                    <i class="btn-sm fa fa-user-circle dropdown-toggle px-3 me-2"
                    type="button"
                    id="dropdownMenuButton"
                    data-mdb-dropdown-init
                    data-mdb-ripple-init
                    aria-expanded="false"
                    aria-hidden="true" 
                    style="font-size: 15px; color: rgb(204, 104, 22);"><em class="px-3 me-2">{{ username }}</em></i>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <li><a class="dropdown-item" href="#">Edit Profile</a></li>
                        <li><a class="dropdown-item" href="{% url 'dashboard' %}">Dashboard</a></li>
                        <li><a class="dropdown-item" href="{% url 'logout' %}">logout</a></li>
                    </ul>
                    {% else %}
                    <a role="button" href="{% url 'login' %}" class="btn btn-link px-3 me-2">
                        <span style="font-size: x-small;">Login</span>
                    </a>
                    {% endif %}

                </div>
            </div>
            <!-- Collapsible wrapper -->
        </div>
        <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
</header>
<body style="background-color: rgb(219, 212, 212);">
    <div class="container">
        <!--Top section Header-->
        <div class="row" style="padding-top: 10px; padding-bottom: 10px; background-color: rgb(165, 164, 162);">
            <div class="col-md-4 col-sm-4 col-4" style="display: flex; justify-content: center;">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Filter by Region
                </button>
                <ul class="dropdown-menu sm-menu">
                     <li><a class="dropdown-item" href="{% url 'view' %}">Alberta</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">British Columbia</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Manitoba</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">New Brunswick</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Newfoundland & Labrador</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">NorthWest Territories</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Nova Scotia</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Nuna Vut</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Ontario</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Prince Edward Island</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Quebec</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Saskatchewan</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Tukon Territory</a></li>
                </ul>
            </div>
            <div class="col-md-4 col-sm-4 col-4" style="display: flex; justify-content: center;">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Filter by Category
                </button>
                <ul class="dropdown-menu sm-menu">
                    <li><a class="dropdown-item" href="{% url 'view' %}">3D Printing & Robotics</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Automobile & Vehicles</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Air Transport</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Business</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Classes</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Clothing</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Community</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Construction & Farming Equipments</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Electronics</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Freelancing</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Furniture</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Insurance</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Jobs</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Matrimonial</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Pets</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Real Estate, Housing & Rentals</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Sales</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Services</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Softwares</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Space & Astronomy</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Tickets</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Travels, Holiday & Leisure</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">Others</a></li>
                </ul>
            </div>
            <div class="col-md-4 col-sm-4 col-4" style="display: flex; justify-content: center;">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Filter by Price
                </button>
                <ul class="dropdown-menu sm-menu">
                    <li><a class="dropdown-item" href="{% url 'view' %}">Any</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">$0 - $99</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">$100 - $199</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">$200 - $299</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">$300 - $399</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">$400 - $499</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">$500 - $999</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">$1000 - $9999</a></li>
                    <li><a class="dropdown-item" href="{% url 'view' %}">More than $10000</a></li>
                </ul>
            </div>
        </div>
        <!--End of Top Section header-->
        
        <!--Product Cards-->
        <div style="padding-top: 10px;">
            <div class="row">
                <!--start loop here-->
                {% if ad %}
                {% for ad in ad %}                
                <div class="col-md-3 col-sm-6 mb-3">                    
                    <div style="padding-bottom: 10px;">
                        <div class="card" style="width: 15rem;">

                            
                            <div id="carouselExampleSlidesOnly" class="carousel slide" data-mdb-ride="carousel" data-mdb-carousel-init>
                                <div class="carousel-inner">
                                    {% for img in ad.adimages_set.all %}
                                    <div class="carousel-item active">
                                        <img src="{{ img.media.url }}" class="d-block w-100" alt="ad_image"/>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            
                            <div class="card-body">
                              <h5 class="card-title">{{ ad.title }}</h5><span class="badge rounded-pill badge-success">$ {{ ad.price }}</span>
                              <p class="long-text" style="font-size: small;">{{ ad.description }}</p>
                                <form method="POST" action="view">
                                    {% csrf_token %}
                                    <input name="ad_id" type="hidden" value="{{ ad.id }}">
                                    <input type="hidden" name="ad_categ" value="{{ ad.category }}">
                                    <button type="submit" name="more" value="more" class="btn btn-outline-warning">
                                        <i class="fa fa-eye" aria-hidden="true"></i>
                                        See More...</button>
                                </form>                                
                            </div>
                        </div>
                    </div>                    
                </div>
                <script>
                    var para = document.getElementsByClassName("long-text")[0];
                    var text = para.innerHTML;
                    para.innerHTML = "";
                    var words = text.split(" ");
                    for (i = 0; i < 5; i++) {
                    para.innerHTML += words[i] + " ";
                    }
                    para.innerHTML += "...";
                </script>
                {% endfor %}
                {% else %}
                <div class="alert alert-warning" role="alert"><i style="font-size: 24px;" class="fa fa-exclamation-triangle pull-left"></i>                        
                    <em>No ads Available at the moment!</em>
                </div>
                {% endif %}
                <!--end loop here-->
            </div>
            
            
            
            
        </div>
        <!--EndCard-->
        
    </div>
    
    
</body>
<footer>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.0.0/mdb.umd.min.js"></script>
</footer>

</html>